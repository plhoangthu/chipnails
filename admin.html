<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin - Chip Nails</title>

  <style>
    body{ font-family: system-ui, Arial; margin:0; background:#f6f7fb; color:#111827; }
    .wrap{ max-width: 1100px; margin: 22px auto; padding: 16px; }
    .card{ background:#fff; border-radius: 16px; padding: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.08); }
    h1{ margin:0 0 10px; font-size: 20px; }

    .row{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 760px){ .row{ grid-template-columns: 1fr; } }

    label{ display:block; font-size: 13px; color:#374151; margin-bottom: 6px; }
    input, button{
      width:100%; box-sizing:border-box; padding: 10px 12px; border-radius: 12px;
      border:1px solid #d6d9e0; font-size: 14px; background:#fff;
    }
    button{ cursor:pointer; font-weight: 850; border:0; }
    .btn{ background:#111827; color:#fff; }
    .btn2{ background:#fff; color:#111827; border:1px solid #d6d9e0; }
    .btnDanger{ background:#b91c1c; color:#fff; }
    .muted{ color:#6b7280; font-size: 12.5px; }

    .toolbar{
      display:grid;
      grid-template-columns: 1.2fr .6fr .6fr .6fr;
      gap: 10px;
      align-items:end;
      margin-top: 10px;
    }
    @media (max-width: 900px){
      .toolbar{ grid-template-columns: 1fr 1fr; }
    }

    table{ width:100%; border-collapse: collapse; margin-top: 12px; }
    th, td{ text-align:left; padding: 10px 10px; border-bottom: 1px solid #eef2f7; vertical-align: top; }
    th{ font-size: 12px; color:#6b7280; text-transform: uppercase; letter-spacing: .06em; }
    td{ font-size: 14px; }
    .badgeNew{
      display:inline-flex; align-items:center; gap:6px;
      background: rgba(245,158,11,.14);
      border: 1px solid rgba(245,158,11,.25);
      color:#92400e;
      font-weight: 900;
      padding: 4px 8px; border-radius: 999px; font-size: 12px;
      margin-left: 8px;
    }
    tr.new24{
      background: linear-gradient(90deg, rgba(245,158,11,.12), transparent 55%);
    }

    .actions{ display:flex; gap:8px; flex-wrap:wrap; }
    .actionBtn{
      padding: 8px 10px; border-radius: 10px; font-size: 13px;
      border: 1px solid #d6d9e0; background:#fff; cursor:pointer; font-weight: 850;
    }
    .actionBtn.danger{ border-color: rgba(185,28,28,.35); background: rgba(185,28,28,.08); color:#991b1b; }

    /* Modal */
    .modal-backdrop{
      position: fixed; inset:0;
      background: rgba(17,24,39,.45);
      display:none; align-items:center; justify-content:center;
      padding: 16px; z-index: 50;
    }
    .modal{
      width: min(520px, 92vw);
      background:#fff; border-radius: 16px;
      box-shadow: 0 18px 50px rgba(0,0,0,.25);
      border: 1px solid rgba(0,0,0,.08);
      padding: 14px 14px 12px;
    }
    .modal.ok h3{ color:#065f46; }
    .modal.err h3{ color:#991b1b; }
    .modal h3{ margin: 0 0 6px; font-weight: 950; }
    .modal p{ margin:0; white-space: pre-line; line-height: 1.45; }
    .modal-actions{ display:flex; justify-content:flex-end; gap:10px; margin-top: 12px; }
    .modal-actions button{
      width:auto; padding: 10px 12px; border-radius: 12px;
      border: 1px solid #d6d9e0; background:#fff; font-weight: 900;
    }
    .modal-actions .primary{ background:#111827; color:#fff; border:0; }
    .modal-actions .danger{ background:#b91c1c; color:#fff; border:0; }
    tr.canceled { opacity: .55; }
.badgeCanceled{
  display:inline-flex; align-items:center; gap:6px;
  background: rgba(185,28,28,.10);
  border: 1px solid rgba(185,28,28,.22);
  color:#991b1b;
  font-weight: 900;
  padding: 4px 8px; border-radius: 999px; font-size: 12px;
  margin-left: 8px;
}

  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <h1>Portal Admin - Chip Nails</h1>
      <div class="row">
        <div>
          <label>Email</label>
          <input id="adminEmail" placeholder="admin@email.com" />
        </div>
        <div>
          <label>Mật khẩu</label>
          <input id="adminPass" type="password" placeholder="••••••••" />
        </div>
      </div>

      <div class="row" style="margin-top:10px;">
        <button id="loginBtn" class="btn">Đăng nhập</button>
        <button id="logoutBtn" class="btn2">Đăng xuất</button>
      </div>

      <div class="toolbar">
        <div>
          <label>Tìm kiếm (Tên / SĐT)</label>
          <input id="searchInput" placeholder="Ví dụ: Nga / 09xxx..." />
          <div class="muted">Tìm nhanh trên danh sách đã tải.</div>
        </div>

        <div>
          <label>Filter theo ngày (tuỳ chọn)</label>
          <input id="dateInput" type="date" />
          <div class="muted">Bỏ trống = xem tất cả.</div>
        </div>

        <div>
          <label>&nbsp;</label>
          <button id="loadBtn" class="btn">Tải danh sách</button>
        </div>

        <div>
          <label>&nbsp;</label>
          <button id="clearFilterBtn" class="btn2">Xoá filter</button>
        </div>
      </div>

      <div class="muted" style="margin-top:10px;">
        * Booking mới trong 24h sẽ được highlight.
      </div>

      <table>
        <thead>
          <tr>
            <th>Thời gian</th>
            <th>Dịch vụ</th>
            <th>SL</th>
            <th>Khách</th>
            <th>SĐT</th>
            <th>Ghi chú</th>
            <th>Thao tác</th>
          </tr>
        </thead>
        <tbody id="bookingBody">
          <tr><td colspan="7" class="muted">Hãy đăng nhập và bấm “Tải danh sách”.</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Modal -->
  <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
    <div id="modalBox" class="modal">
      <h3 id="modalTitle">Thông báo</h3>
      <p id="modalBody"></p>
      <div class="modal-actions">
        <button id="modalClose">Đóng</button>
        <button id="modalOk" class="primary">OK</button>
      </div>
    </div>
  </div>

  <!-- Supabase JS -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- IMPORTANT: thêm version để tránh cache -->
  <script src="admin.js?v=20260113-2"></script>
</body>
</html>
